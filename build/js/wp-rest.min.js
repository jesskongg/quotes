(()=>{const e=jQuery("#quote-active"),t=jQuery("#quote__error-msg"),o=jQuery("#quote__fetch-btn"),r=jQuery("#quote__form"),n=jQuery("#quote__form-success-msg"),s=jQuery("#quote__form-error-msg"),u=r.find("#quote__author"),_=r.find("#quote__content"),a=r.find("#quote__source"),c=r.find("#quote__url");window.addEventListener("popstate",function(){window.location=window.location}),o.on("click",o=>{o.preventDefault(),jQuery.ajax({url:`${wp_vars.rest_url}posts?filter[orderby]=rand&filter[posts_per_page]=1`,beforeSend:e=>e.setRequestHeader("X-WP-Nonce",wp_vars.wpapi_nonce)}).success(o=>{const r=o[0],{content:n,title:s,link:u,_qod_quote_source:_,_qod_quote_source_url:a}=r;t.hide(),e.empty().append(`<p>${n.rendered}<p>\n        <footer class="quote__footer">\n          â€” ${s.rendered}\n          ${_&&a?`, <cite class="quote__cite">\n                <a href="${a}" target="_blank" rel="noopener noreferrer">\n                  ${_}\n                </a>\n              </cite>`:_?`, <cite class="quote__cite">\n                    ${_}\n                  </cite>`:""}\n        </footer>`),history.pushState({},"",u)}).error(()=>{t.show()})}),r.on("submit",e=>{e.preventDefault(),function(e){jQuery.ajax({url:`${wp_vars.rest_url}posts`,method:"POST",data:e,beforeSend:e=>e.setRequestHeader("X-WP-Nonce",wp_vars.wpapi_nonce)}).success(()=>{n.show(),s.hide(),u.val(""),_.val(""),a.val(""),c.val("")}).error(()=>{s.show()})}({title:u.val(),content:_.val(),_qod_quote_source:a.val(),_qod_quote_source_url:c.val(),status:"pending"})})})();