let $fetchBtn,$quoteError,$quoteForm,$quoteFormSuccess,$quoteFormError,$quoteAuthor,$quoteContent,$quoteSource,$quoteUrl,$activeQuote;function fetchRandomQuote(){return jQuery.ajax({url:`${wp_vars.rest_url}posts?filter[orderby]=rand&filter[posts_per_page]=1`,beforeSend:e=>e.setRequestHeader("X-WP-Nonce",wp_vars.wpapi_nonce)}).success(e=>{const o=e[0],{content:t,title:r,link:u,_qod_quote_source:n,_qod_quote_source_url:s}=o;$quoteError.hide(),$activeQuote.empty().append(`<p>${t.rendered}<p>\n        <footer class="quote__footer">\n          â€” ${r.rendered}\n          ${n&&s?`, <cite class="quote__cite">\n                <a href="${s}" target="_blank" rel="noopener noreferrer">\n                  ${n}\n                </a>\n              </cite>`:n?`, <cite class="quote__cite">\n                    ${n}\n                  </cite>`:""}\n        </footer>`),history.pushState({},"",u)}).error(()=>{$quoteError.show()})}function submitQuote(e){return jQuery.ajax({url:`${wp_vars.rest_url}posts`,method:"POST",data:e,beforeSend:e=>e.setRequestHeader("X-WP-Nonce",wp_vars.wpapi_nonce)}).success(()=>{$quoteFormSuccess.show(),$quoteFormError.hide(),$quoteAuthor.val(""),$quoteContent.val(""),$quoteSource.val(""),$quoteUrl.val("")}).error(()=>{$quoteFormError.show()})}function forceUpdate(){window.location=window.location}jQuery(()=>{$activeQuote=jQuery("#quote-active"),$quoteError=jQuery("#quote__error-msg"),$fetchBtn=jQuery("#quote__fetch-btn"),$quoteForm=jQuery("#quote__form"),$quoteFormSuccess=jQuery("#quote__form-success-msg"),$quoteFormError=jQuery("#quote__form-error-msg"),$quoteAuthor=$quoteForm.find("#quote__author"),$quoteContent=$quoteForm.find("#quote__content"),$quoteSource=$quoteForm.find("#quote__source"),$quoteUrl=$quoteForm.find("#quote__url"),window.addEventListener("popstate",forceUpdate),$fetchBtn.on("click",e=>{e.preventDefault(),fetchRandomQuote()}),$quoteForm.on("submit",e=>{e.preventDefault(),submitQuote({title:$quoteAuthor.val(),content:$quoteContent.val(),_qod_quote_source:$quoteSource.val(),_qod_quote_source_url:$quoteUrl.val(),status:"pending"})})});